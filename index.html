<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrativo Persistente</title>
    <style>
        :root { --primary: #1e293b; --accent: #3b82f6; --danger: #ef4444; --success: #22c55e; --warning: #f59e0b; --text: #f8fafc; }
        body { font-family: 'Segoe UI', sans-serif; background: #0f172a; color: var(--text); margin: 0; padding-bottom: 50px; }

        /* NAVEGACI√ìN SUPERIOR */
        .navbar { display: flex; background: var(--primary); padding: 10px; gap: 8px; position: sticky; top: 0; z-index: 1000; overflow-x: auto; border-bottom: 2px solid var(--accent); }
        .nav-btn { background: #334155; color: white; border: none; padding: 12px 15px; border-radius: 6px; cursor: pointer; font-weight: bold; white-space: nowrap; flex: 1; font-size: 0.8rem; }
        .nav-btn.active { background: var(--accent); box-shadow: 0 0 10px var(--accent); }

        .container { padding: 15px; }
        .section { display: none; animation: fadeIn 0.3s; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* TABLAS ESTILO TU IMAGEN */
        .card { background: #1e293b; border-radius: 8px; padding: 15px; margin-bottom: 20px; border: 1px solid #334155; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; background: white; color: #333; border-radius: 8px; overflow: hidden; }
        th { background: #1e2d3b; color: white; padding: 10px; font-size: 0.8rem; }
        td { border-bottom: 1px solid #ddd; padding: 8px; font-size: 0.85rem; }

        /* BOTONES Y INPUTS */
        input, select, textarea { background: #0f172a; border: 1px solid #475569; color: white; padding: 10px; border-radius: 5px; width: 100%; margin-bottom: 10px; box-sizing: border-box; }
        .btn-add { background: var(--success); color: white; width: 100%; padding: 12px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; margin-bottom: 10px; }
        .action-btn { padding: 5px 8px; border: none; border-radius: 4px; color: white; cursor: pointer; font-size: 0.7rem; margin: 2px; font-weight: bold; }
        
        .status-badge { padding: 3px 6px; border-radius: 4px; font-size: 0.7rem; font-weight: bold; }
        .on { background: var(--success); }
        .off { background: var(--danger); }
    </style>
</head>
<body>

<div class="navbar">
    <button class="nav-btn active" onclick="showTab('tab-historial')">üïí HISTORIAL</button>
    <button class="nav-btn" onclick="showTab('tab-vip')">üíé VIP</button>
    <button class="nav-btn" onclick="showTab('tab-socios')">üë• SOCIOS</button>
    <button class="nav-btn" onclick="showTab('tab-stock')">üì¶ STOCK</button>
    <button class="nav-btn" onclick="showTab('tab-resumen')">üìä TOTAL</button>
</div>

<div class="container">

    <div id="tab-historial" class="section active">
        <div class="card">
            <h3>Historial de Actividad</h3>
            <div id="historial-lista" style="max-height: 400px; overflow-y: auto;">
                </div>
            <button class="btn-add" style="background:var(--danger); margin-top:10px;" onclick="limpiarHistorial()">üóëÔ∏è Limpiar Todo el Historial</button>
        </div>
    </div>

    <div id="tab-vip" class="section">
        <div class="card">
            <h3>Agregar Miembros VIP</h3>
            <textarea id="input-vip-lista" placeholder="Pega el listado aqu√≠ (Nombre - N√∫mero)"></textarea>
            <button class="btn-add" onclick="agregarVIP()">PROCESAR LISTADO</button>
            <table id="tabla-vip">
                <thead><tr><th>Nombre</th><th>Acci√≥n</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <div id="tab-socios" class="section">
        <div class="card">
            <h3>Gesti√≥n de Socios/Admin</h3>
            <input type="text" id="socio-nombre" placeholder="Nombre del Socio">
            <select id="socio-rol"><option value="Socio">Socio</option><option value="Admin">Admin</option></select>
            <button class="btn-add" onclick="agregarSocio()">CREAR SOCIO</button>
            <table id="tabla-socios">
                <thead><tr><th>Nombre</th><th>Rol</th><th>Estado</th><th>Acci√≥n</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <div id="tab-stock" class="section">
        <div class="card">
            <h3>Cargar Nueva Cuenta</h3>
            <input type="text" id="stock-correo" placeholder="Correo">
            <input type="text" id="stock-clave" placeholder="Clave">
            <select id="stock-plataforma">
                <option value="Netflix">Netflix</option>
                <option value="DISNYE premium">DISNYE premium</option>
                <option value="HBO Max">HBO Max</option>
            </select>
            <button class="btn-add" onclick="agregarStock()">A√ëADIR A INVENTARIO</button>
        </div>
        <div class="card">
            <h3>Editar/Eliminar Stock</h3>
            <table id="tabla-stock">
                <thead><tr><th>Plataforma</th><th>Cuenta</th><th>Estado</th><th>Acci√≥n</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <div id="tab-resumen" class="section">
        <div class="card">
            <h3>üìä Resumen de Inventario</h3>
            <div style="font-size: 1.5rem; margin: 10px 0;">Total Stock: <span id="res-total" style="color:var(--accent)">0</span></div>
            <div style="font-size: 1.5rem; margin: 10px 0;">Cuentas Usadas: <span id="res-usadas" style="color:var(--warning)">0</span></div>
            <button class="btn-add" onclick="resetUsadas()">üîÑ Resetear Contador de Usadas</button>
        </div>
    </div>

</div>

<script>
    // --- L√ìGICA DE PERSISTENCIA (SAVES EVERYTHING) ---
    let db = JSON.parse(localStorage.getItem('mi_sistema_pro')) || {
        historial: [], vip: [], socios: [], stock: [], usadas: 0
    };

    function save() {
        localStorage.setItem('mi_sistema_pro', JSON.stringify(db));
        renderAll();
    }

    function addLog(msg) {
        let time = new Date().toLocaleTimeString();
        db.historial.unshift(`[${time}] ${msg}`);
        save();
    }

    // --- NAVEGACI√ìN ---
    function showTab(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    // --- FUNCIONES VIP ---
    function agregarVIP() {
        let texto = document.getElementById('input-vip-lista').value;
        if(texto) {
            db.vip.push(texto);
            addLog("Agreg√≥ lista VIP");
            document.getElementById('input-vip-lista').value = "";
        }
    }

    // --- FUNCIONES SOCIOS ---
    function agregarSocio() {
        let nom = document.getElementById('socio-nombre').value;
        let rol = document.getElementById('socio-rol').value;
        if(nom) {
            db.socios.push({nombre: nom, rol: rol, estado: true});
            addLog(`Socio ${nom} creado`);
            document.getElementById('socio-nombre').value = "";
            save();
        }
    }

    function toggleSocio(index) {
        db.socios[index].estado = !db.socios[index].estado;
        addLog(`Socio ${db.socios[index].nombre} cambi√≥ estado`);
        save();
    }

    // --- FUNCIONES STOCK ---
    function agregarStock() {
        let c = document.getElementById('stock-correo').value;
        let p = document.getElementById('stock-clave').value;
        let plat = document.getElementById('stock-plataforma').value;
        if(c && p) {
            db.stock.push({plat, cuenta: `${c}:${p}`, estado: 'disponible'});
            addLog(`Cuenta ${plat} cargada`);
            save();
        }
    }

    function borrarStock(index) {
        db.stock.splice(index, 1);
        db.usadas++;
        addLog("Cuenta eliminada/usada");
        save();
    }

    function resetUsadas() {
        db.usadas = 0;
        addLog("Contador de usadas reseteado");
        save();
    }

    function limpiarHistorial() {
        db.historial = [];
        save();
    }

    // --- RENDERIZADO (DIBUJAR TODO) ---
    function renderAll() {
        // Historial
        document.getElementById('historial-lista').innerHTML = db.historial.map(h => `<div style="border-bottom:1px solid #334155; padding:5px;">${h}</div>`).join('');
        
        // VIP
        document.querySelector('#tabla-vip tbody').innerHTML = db.vip.map((v, i) => `<tr><td>${v}</td><td><button class="action-btn" style="background:var(--danger)" onclick="db.vip.splice(${i},1);save()">X</button></td></tr>`).join('');
        
        // Socios
        document.querySelector('#tabla-socios tbody').innerHTML = db.socios.map((s, i) => `
            <tr>
                <td>${s.nombre}</td>
                <td>${s.rol}</td>
                <td><span class="status-badge ${s.estado?'on':'off'}">${s.estado?'ON':'OFF'}</span></td>
                <td><button class="action-btn" style="background:var(--accent)" onclick="toggleSocio(${i})">Switch</button></td>
            </tr>`).join('');

        // Stock
        document.querySelector('#tabla-stock tbody').innerHTML = db.stock.map((s, i) => `
            <tr>
                <td>${s.plat}</td>
                <td>${s.cuenta}</td>
                <td><span class="status-badge on">${s.estado}</span></td>
                <td><button class="action-btn" style="background:var(--danger)" onclick="borrarStock(${i})">BORRAR</button></td>
            </tr>`).join('');

        // Resumen
        document.getElementById('res-total').innerText = db.stock.length;
        document.getElementById('res-usadas').innerText = db.usadas;
    }

    // Iniciar
    renderAll();
</script>

</body>
</html>
