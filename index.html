<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Control - Andy Obreg√≥n</title>
    <style>
        :root { --primary: #1e293b; --accent: #3b82f6; --danger: #ef4444; --success: #22c55e; --warning: #f59e0b; --text: #f8fafc; }
        body { font-family: 'Segoe UI', sans-serif; background: #0f172a; color: var(--text); margin: 0; padding-bottom: 50px; }

        /* LOGIN */
        #login-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:#0f172a; z-index: 2000; display: flex; align-items: center; justify-content: center; }
        .login-box { background: var(--primary); padding: 30px; border-radius: 12px; width: 90%; max-width: 400px; text-align: center; border: 2px solid var(--accent); box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }

        /* NAVEGACI√ìN */
        .navbar { display: flex; background: var(--primary); padding: 10px; gap: 5px; position: sticky; top: 0; z-index: 1000; overflow-x: auto; border-bottom: 2px solid var(--accent); }
        .nav-btn { background: #334155; color: white; border: none; padding: 10px; border-radius: 6px; cursor: pointer; font-weight: bold; white-space: nowrap; flex: 1; font-size: 0.75rem; }
        .nav-btn.active { background: var(--accent); }
        .btn-logout { background: var(--danger) !important; color: white; border: 1px solid white; }

        .container { padding: 15px; }
        .section { display: none; animation: fadeIn 0.3s; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .card { background: #1e293b; border-radius: 8px; padding: 15px; margin-bottom: 20px; border: 1px solid #334155; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; background: white; color: #333; border-radius: 8px; overflow: hidden; }
        th { background: #1e2d3b; color: white; padding: 10px; font-size: 0.75rem; }
        td { border-bottom: 1px solid #ddd; padding: 8px; font-size: 0.8rem; }

        input, select, textarea { background: #0f172a; border: 1px solid #475569; color: white; padding: 10px; border-radius: 5px; width: 100%; margin-bottom: 10px; box-sizing: border-box; }
        .btn-add { background: var(--success); color: white; width: 100%; padding: 12px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; }
        .action-btn { padding: 5px 8px; border: none; border-radius: 4px; color: white; cursor: pointer; font-size: 0.7rem; margin: 2px; }
        
        .status-badge { padding: 3px 6px; border-radius: 4px; font-size: 0.7rem; font-weight: bold; }
        .on { background: var(--success); } .off { background: var(--danger); }
    </style>
</head>
<body>

<div id="login-overlay">
    <div class="login-box">
        <h2 style="color:var(--accent)">üõ°Ô∏è PANEL ANDY</h2>
        <p>Introduce tus credenciales de Due√±o</p>
        <input type="email" id="login-email" placeholder="andyobregon799@gmail.com">
        <input type="password" id="login-pass" placeholder="Clave de Admin">
        <button class="btn-add" onclick="verificarLogin()">INGRESAR AL SISTEMA</button>
        <p id="login-error" style="color:var(--danger); display:none; margin-top:10px; font-weight:bold;">¬°DATOS INCORRECTOS!</p>
    </div>
</div>

<div id="main-content" style="display:none;">
    <div class="navbar">
        <button class="nav-btn active" onclick="showTab('tab-historial')">üïí HISTORIAL</button>
        <button class="nav-btn" onclick="showTab('tab-vip')">üíé VIP</button>
        <button class="nav-btn" onclick="showTab('tab-socios')">üë• SOCIOS</button>
        <button class="nav-btn" onclick="showTab('tab-stock')">üì¶ STOCK</button>
        <button class="nav-btn" onclick="showTab('tab-resumen')">üìä TOTAL</button>
        <button class="nav-btn btn-logout" onclick="cerrarSesion()">‚úñÔ∏è CERRAR SESI√ìN</button>
    </div>

    <div class="container">
        <div id="tab-historial" class="section active">
            <div class="card">
                <h3>Historial de Actividad</h3>
                <div id="historial-lista" style="max-height: 300px; overflow-y: auto; background:#0f172a; padding:10px; border-radius:5px;"></div>
                <button class="btn-add" style="background:var(--danger); margin-top:10px;" onclick="limpiarHistorial()">üóëÔ∏è Borrar Log</button>
            </div>
        </div>

        <div id="tab-vip" class="section">
            <div class="card">
                <h3>Carga Masiva VIP</h3>
                <textarea id="input-vip-lista" placeholder="Pega el listado de usuarios aqu√≠..."></textarea>
                <button class="btn-add" onclick="agregarVIP()">‚ûï AGREGAR MIEMBROS</button>
                <table id="tabla-vip"><thead><tr><th>Nombre / Datos</th><th>Quitar</th></tr></thead><tbody></tbody></table>
            </div>
        </div>

        <div id="tab-socios" class="section">
            <div class="card">
                <h3>Crear Nuevo Admin o Socio</h3>
                <input type="text" id="socio-nombre" placeholder="Nombre">
                <input type="email" id="socio-correo" placeholder="Correo de acceso">
                <input type="text" id="socio-pass" placeholder="Contrase√±a">
                <select id="socio-rol"><option value="Socio">Socio</option><option value="Admin">Admin</option></select>
                <button class="btn-add" onclick="agregarSocio()">CREAR CUENTA</button>
            </div>
            <div class="card">
                <h3>Lista de Usuarios con Acceso</h3>
                <table id="tabla-socios"><thead><tr><th>Nombre</th><th>Acceso</th><th>Estado</th><th>Acci√≥n</th></tr></thead><tbody></tbody></table>
            </div>
        </div>

        <div id="tab-stock" class="section">
            <div class="card">
                <h3>‚ûï Crear Plataforma</h3>
                <div style="display:flex; gap:10px;"><input type="text" id="nueva-plat-nombre" placeholder="Nombre Plataforma"><button class="btn-add" style="width:100px;" onclick="crearPlataforma()">AGREGAR</button></div>
            </div>
            <div class="card">
                <h3>üì• Cargar Stock</h3>
                <input type="text" id="stock-correo" placeholder="Correo de la cuenta"><input type="text" id="stock-clave" placeholder="Clave de la cuenta">
                <select id="stock-plataforma-select"></select>
                <button class="btn-add" onclick="agregarStock()">GUARDAR EN STOCK</button>
            </div>
            <div class="card"><h3>üìã Inventario Detallado</h3><table id="tabla-stock"><thead><tr><th>Plat.</th><th>Cuenta</th><th>Acci√≥n</th></tr></thead><tbody></tbody></table></div>
        </div>

        <div id="tab-resumen" class="section">
            <div class="card">
                <h3>üìä Resumen de Ventas</h3>
                <div style="font-size: 1.5rem; margin-bottom: 10px;">En Stock: <span id="res-total" style="color:var(--accent)">0</span></div>
                <div style="font-size: 1.5rem; margin-bottom: 10px;">Vendidas: <span id="res-usadas" style="color:var(--warning)">0</span></div>
                <button class="btn-add" onclick="resetUsadas()">üîÑ Reiniciar Contador</button>
                <button class="btn-add" style="background:var(--danger); margin-top:10px;" onclick="borrarTodoStock()">üî• BORRAR TODO EL STOCK</button>
            </div>
        </div>
    </div>
</div>

<script>
    // CREDENCIALES DE ANDY (DUE√ëO)
    let db = JSON.parse(localStorage.getItem('sistema_andy_v5')) || {
        historial: [], vip: [], stock: [], plataformas: ["Netflix", "Disney+"], usadas: 0,
        socios: [{nombre: "Andy Obregon", correo: "andyobregon799@gmail.com", pass: "123456", rol: "Admin", estado: true}]
    };

    function save() { localStorage.setItem('sistema_andy_v5', JSON.stringify(db)); renderAll(); }
    
    function verificarLogin() {
        let correo = document.getElementById('login-email').value;
        let pass = document.getElementById('login-pass').value;
        let user = db.socios.find(u => u.correo === correo && u.pass === pass && u.estado === true);

        if(user) {
            document.getElementById('login-overlay').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
            addLog(`Sesi√≥n iniciada por: ${user.nombre}`);
        } else {
            document.getElementById('login-error').style.display = 'block';
            setTimeout(() => { document.getElementById('login-error').style.display = 'none'; }, 2000);
        }
    }

    function cerrarSesion() {
        document.getElementById('login-overlay').style.display = 'flex';
        document.getElementById('main-content').style.display = 'none';
        document.getElementById('login-email').value = "";
        document.getElementById('login-pass').value = "";
    }

    function addLog(msg) { let time = new Date().toLocaleTimeString(); db.historial.unshift(`[${time}] ${msg}`); save(); }
    function showTab(id) { document.querySelectorAll('.section').forEach(s => s.classList.remove('active')); document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active')); document.getElementById(id).classList.add('active'); event.currentTarget.classList.add('active'); }
    function crearPlataforma() { let n = document.getElementById('nueva-plat-nombre').value.trim(); if(n) { db.plataformas.push(n); addLog(`Plataforma ${n} creada`); document.getElementById('nueva-plat-nombre').value=""; save(); } }
    function agregarStock() { let c = document.getElementById('stock-correo').value; let p = document.getElementById('stock-clave').value; let plat = document.getElementById('stock-plataforma-select').value; if(c && p) { db.stock.push({plat, cuenta: `${c}:${p}`}); addLog(`Stock cargado: ${plat}`); document.getElementById('stock-correo').value=""; document.getElementById('stock-clave').value=""; save(); } }
    function agregarSocio() { let n = document.getElementById('socio-nombre').value; let c = document.getElementById('socio-correo').value; let p = document.getElementById('socio-pass').value; let r = document.getElementById('socio-rol').value; if(n && c && p) { db.socios.push({nombre: n, correo: c, pass: p, rol: r, estado: true}); addLog(`Socio ${n} creado`); save(); } }
    function toggleSocio(i) { db.socios[i].estado = !db.socios[i].estado; save(); }
    function borrarStock(i) { db.stock.splice(i,1); db.usadas++; addLog("Cuenta entregada/borrada"); save(); }
    function agregarVIP() { let t = document.getElementById('input-vip-lista').value; if(t) { db.vip.push(t); addLog("Lista VIP actualizada"); document.getElementById('input-vip-lista').value = ""; save(); } }
    function resetUsadas() { db.usadas = 0; save(); }
    function limpiarHistorial() { db.historial = []; save(); }
    function borrarTodoStock() { if(confirm("¬øEliminar todo el inventario?")) { db.stock = []; save(); } }

    function renderAll() {
        document.getElementById('historial-lista').innerHTML = db.historial.map(h => `<div style="border-bottom:1px solid #334155; padding:5px; font-size:0.75rem; color:#fff;">${h}</div>`).join('');
        document.getElementById('stock-plataforma-select').innerHTML = db.plataformas.map(p => `<option value="${p}">${p}</option>`).join('');
        document.querySelector('#tabla-vip tbody').innerHTML = db.vip.map((v, i) => `<tr><td>${v}</td><td><button class="action-btn" style="background:var(--danger)" onclick="db.vip.splice(${i},1);save()">X</button></td></tr>`).join('');
        document.querySelector('#tabla-socios tbody').innerHTML = db.socios.map((s, i) => `<tr><td>${s.nombre}</td><td>${s.correo}<br><b>${s.pass}</b></td><td><span class="status-badge ${s.estado?'on':'off'}">${s.estado?'ON':'OFF'}</span></td><td><button class="action-btn" style="background:var(--accent)" onclick="toggleSocio(${i})">ON/OFF</button></td></tr>`).join('');
        document.querySelector('#tabla-stock tbody').innerHTML = db.stock.map((s, i) => `<tr><td>${s.plat}</td><td>${s.cuenta}</td><td><button class="action-btn" style="background:var(--danger)" onclick="borrarStock(${i})">X</button></td></tr>`).join('');
        document.getElementById('res-total').innerText = db.stock.length;
        document.getElementById('res-usadas').innerText = db.usadas;
    }
    renderAll();
</script>
</body>
</html>
